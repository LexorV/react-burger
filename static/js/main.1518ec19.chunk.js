(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{105:function(e,t,n){},11:function(e,t,n){e.exports={main:"autchFormStyle_main__tsiza",box_form:"autchFormStyle_box_form__3HgZa",box_register:"autchFormStyle_box_register__1Y2lr",link:"autchFormStyle_link__1lElt"}},13:function(e,t,n){e.exports={main:"profile_main__1qpzQ",main__box:"profile_main__box__1MgCD",main__box_history:"profile_main__box_history__3hAJ6",menu__box:"profile_menu__box__3u5tM",menu__lists:"profile_menu__lists__33nQz",menu__list:"profile_menu__list__31NXe",inputs__box:"profile_inputs__box__3MY6J",menu__list_active:"profile_menu__list_active__17gDB",button__box:"profile_button__box__28GZq",card__list:"profile_card__list__ZUO3b",links__profile_menu:"profile_links__profile_menu__3CvsS",links__profile_menu_active:"profile_links__profile_menu_active__1Lk0A"}},16:function(e,t,n){e.exports={feed:"feed_feed__1ceFq",card__list:"feed_card__list__ustoI",box_cards:"feed_box_cards__2Q-WU",statistics:"feed_statistics__1kLoR",statistics__number_order:"feed_statistics__number_order__1HuSI",statistics__number:"feed_statistics__number__2WtI0",statistics__number_box:"feed_statistics__number_box__1H_1l",statistics__number_lists:"feed_statistics__number_lists__2hE8A",statistics__number_list:"feed_statistics__number_list__1zFDe"}},189:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(32),s=n.n(a),i=(n(105),n(7)),o=n(6),l=n(4),d=n(5),u=n(25),_=n.n(u),j=n(0);function b(){var e=Object(c.useState)("primary"),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)("secondary"),s=Object(l.a)(a,2),o=s[0],u=s[1],b=Object(c.useState)("secondary"),m=Object(l.a)(b,2),p=m[0],O=m[1],x=function(e){return e.isActive?"".concat(_.a.link_style_active,"\n    text text_type_main-default pl-2"):"".concat(_.a.link_style," text text_type_main-default pl-2")};return Object(j.jsxs)("header",{className:"".concat(_.a.header," pt-4 pb-4"),children:[Object(j.jsxs)("nav",{className:_.a.menu,children:[Object(j.jsxs)("li",{className:"".concat(_.a.menu_link," ").concat(x," p-5"),children:[Object(j.jsx)(d.BurgerIcon,{type:n}),Object(j.jsx)(i.c,{onClick:function(){r("primary"),u("secondary"),O("secondary")},to:"/",className:x,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(j.jsxs)("li",{className:"".concat(_.a.menu_link," pl-2 p-5"),children:[Object(j.jsx)(d.ListIcon,{type:p}),Object(j.jsx)(i.c,{onClick:function(){O("primary"),r("secondary"),u("secondary")},to:"/feed",className:x,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(j.jsx)(i.b,{to:"/",className:"".concat(_.a.logo_box," pr-30"),children:Object(j.jsx)(d.Logo,{})}),Object(j.jsxs)("div",{className:"".concat(_.a.menu_link," ").concat(x," p-5"),children:[Object(j.jsx)(d.ProfileIcon,{type:o}),Object(j.jsx)(i.c,{onClick:function(){u("primary"),r("secondary"),O("secondary")},to:"/profile",className:x,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})}var m=n(194),p=n(39),O=function(){return Object(p.b)()},x=p.c,f=n(98);function h(e,t,n){var c=(n=n||{}).expires;if("number"==typeof c&&c){var r=new Date;r.setTime(r.getTime()+1e3*c),c=n.expires=r}c&&c.toUTCString&&(n.expires=c.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var s in n){a+="; "+s;var i=n[s];!0!==i&&(a+="="+i)}document.cookie=a}function g(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var y,v=function(e){var t=new Date(e),n=new Date,c=t.getHours().toString(),r=t.getMinutes().toString().padStart(2,"0"),a=new Intl.NumberFormat("ru-RU",{signDisplay:"exceptZero"}).format(0-t.getTimezoneOffset()/60);return"".concat(function(){var e=Math.floor((n.getTime()-t.getTime())/864e5);return 0===e?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===e?"\u0412\u0447\u0435\u0440\u0430":e>1?"".concat(e," ").concat(e>1&&e<5?"\u0434\u043d\u044f":"\u0434\u043d\u0435\u0439"," \u043d\u0430\u0437\u0430\u0434"):"\u041d\u0435\u0442 \u0414\u0430\u0442\u044b"}(),", ").concat(c,":").concat(r," i-GMT").concat(a)},N=function(e,t){var n=e.ingredients.map((function(t){var n=e.ingredients.map((function(e){var n=0;return n=e===t?n+1:n})).reduce((function(e,t){return e+t}));return{id:t,number:n}}));return t.filter((function(t){return e.ingredients.includes(t._id)})).map((function(e){var t=n.find((function(t){return t.id===e._id}));return e.numberIngred=t.number,e}))},S=function(e){return e.map((function(e){return e.price*e.numberIngred})).reduce((function(e,t){return e+t}))},C="https://norma.nomoreparties.space/api/",I="wss://norma.nomoreparties.space/orders/all",E=function(e){return"wss://norma.nomoreparties.space/orders?token=".concat(e)},T=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},k=function(e){return fetch("".concat(C,"auth/register"),{method:"POST",headers:new Headers([["Content-Type","application/json"]]),body:JSON.stringify(e)}).then(T)},w=function(e){return fetch("".concat(C,"auth/login"),{method:"POST",headers:new Headers([["Content-Type","application/json"]]),body:JSON.stringify(e)}).then(T)},R=function(e){return fetch("".concat(C,"password-reset"),{method:"POST",headers:new Headers([["Content-Type","application/json"]]),body:JSON.stringify(e)}).then(T)},D=function(e){return fetch("".concat(C,"password-reset/reset"),{method:"POST",headers:new Headers([["Content-Type","application/json"]]),body:JSON.stringify(e)}).then(T)},F=function(){return fetch("".concat(C,"auth/user"),{method:"GET",headers:new Headers([["Content-Type","application/json"],["Authorization","Bearer ".concat(g("accessToken"))]])}).then(T)},M=function(e){return fetch("".concat(C,"auth/user"),{method:"PATCH",headers:new Headers([["Content-Type","application/json"],["Authorization","Bearer ".concat(g("accessToken"))]]),body:JSON.stringify(e)}).then(T)},A=function(){return fetch("".concat(C,"auth/token"),{method:"POST",headers:new Headers([["Content-Type","application/json"]]),body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(T)},G="GET_INGREDIENTS_REQUEST",L="GET_INGREDIENTS_SUCCESS",U="GET_INGREDIENTS_FAILED",q=function(){return{type:U}},B=function(){return function(e){e({type:G}),fetch("".concat(C,"ingredients")).then(T).then((function(t){var n;t&&t.success?e((n=t.data,{type:L,ingredients:n})):e(q())})).catch((function(t){e(q())}))}},H=n(11),P=n.n(H),z="CHANGE_REGISTER_FORM_VALUE",J="REGISTER_FORM_SUBMIT",W="REGISTER_FORM_SUBMIT_SUCCESS",V="REGISTER_FORM_SUBMIT_FAILED",X="LOGOUT_USER",Y="fORGOT_FORM_SUBMIT",Z="fORGOT_FORM_SUCCESS",Q="fORGOT_FORM_FAILED",K="fORGOT_FORM_CLEANING",$="RESET_FORM_SUBMIT",ee="RESET_fORM_SUCCESS",te="RESET_fORM_FAILED",ne="RESET_fORM_FAILED",ce="GLOBAL_CLEANING_FORM",re=function(e,t){return{type:z,field:e,value:t}},ae=function(e,t){return function(n){n({type:J}),t(e).then((function(e){n({type:W,tokenData:e})})).catch((function(e){n({type:V})}))}},se=function(e,t){return function(n){n({type:Y}),t(e).then((function(e){n(function(e){return{type:Z,data:e}}(e))})).catch((function(e){n({type:Q})}))}},ie=function(e,t){return function(n){n({type:$}),t(e).then((function(e){n({type:ee,tokenData:e})})).catch((function(e){n({type:te})}))}},oe=function(){var e=Object(c.useState)("password"),t=Object(l.a)(e,2),n=t[0],r=t[1],a=x((function(e){return e.registrationForm})),s=a.email,u=a.password,_=a.registerReceivedData,b=a.registrationFailed,m=Object(o.g)(),p=O(),f=Object(o.f)();Object(c.useEffect)((function(){!function(){if(_){h("accessToken",_.accessToken.split("Bearer ")[1],{}),localStorage.setItem("refreshToken",_.refreshToken);var e=f.state;m(null!==e?e:"/")}}(),p({type:ce})}),[_]);var g=function(e){p(re(e.target.name,e.target.value))};return Object(j.jsx)("div",{className:P.a.main,children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(ae({email:s,password:u},w))},className:P.a.box_form,children:[Object(j.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0412\u0445\u043e\u0434"}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(d.Input,{name:"email",size:"default",type:"email",placeholder:"E-mail",value:s,errorText:"test",onChange:g})}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(d.Input,{name:"password",icon:"ShowIcon",onIconClick:function(){r("password"===n?"text":"password")},type:n,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:u,onChange:g})}),Object(j.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"}),!0===b&&Object(j.jsx)("p",{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b"}),Object(j.jsxs)("div",{className:"".concat(P.a.box_register," mt-20"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(j.jsx)(i.b,{to:"/register",className:"text text_type_main-default ".concat(P.a.link),children:" \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(j.jsxs)("div",{className:P.a.box_register,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(j.jsx)(i.b,{to:"/forgot-password",className:"text text_type_main-default ".concat(P.a.link),children:" \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},le=function(){var e=x((function(e){return e.registrationForm})),t=e.name,n=e.email,r=e.password,a=e.registerReceivedData,s=e.registrationFailed,u=Object(c.useState)("password"),_=Object(l.a)(u,2),b=_[0],m=_[1],p=Object(o.g)(),f=O();Object(c.useEffect)((function(){!function(){var e=g("accessToken");(a||e)&&p("/")}(),f({type:ce})}),[a]);var h=function(e){f(re(e.target.name,e.target.value))};return Object(j.jsx)("div",{className:P.a.main,children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(ae({name:t,email:n,password:r},k))},className:P.a.box_form,children:[Object(j.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(d.Input,{type:"text",placeholder:"\u0438\u043c\u044f",name:"name",value:t,onChange:h})}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(d.Input,{type:"email",name:"email",placeholder:"E-mail",value:n,onChange:h})}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(d.Input,{icon:"ShowIcon",name:"password",onIconClick:function(){m("password"===b?"text":"password")},type:b,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:r,onChange:h})}),!0===s&&Object(j.jsx)("p",{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b"}),Object(j.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(j.jsxs)("div",{className:"".concat(P.a.box_register," mt-20"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(j.jsx)(i.b,{to:"/login",className:"text text_type_main-default ".concat(P.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},de=function(){var e=x((function(e){return e.registrationForm})),t=e.emailForgot,n=e.registerReceivedData,r=e.forgotSuccess,a=Object(c.useState)(""),s=Object(l.a)(a,2),u=s[0],_=s[1],b=Object(c.useState)(null),m=Object(l.a)(b,2),p=m[0],f=m[1],h=Object(o.g)(),y=O();Object(c.useEffect)((function(){t&&function(e,t,n,c,r){var a=c;switch(e){case"email":n((a=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))?"":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 Email"),r(a);break;case"password":n((a=t.length>=6)?"":"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435, \u0447\u0435\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),r(a)}}("email",t,_,p,f)}),[t]),Object(c.useEffect)((function(){y({type:K}),n&&h("/login")}),[r]),Object(c.useEffect)((function(){g("accessToken")&&h("/")}),[]);return Object(j.jsx)("div",{className:P.a.main,children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(null!==p||r)&&(y(se({email:t},R)),h("/reset-password",{replace:!0,state:"forgotPage"}))},className:P.a.box_form,children:[Object(j.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0412\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(j.jsxs)("div",{className:"pb-6",children:[Object(j.jsx)(d.Input,{type:"email",name:"emailForgot",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:t,onChange:function(e){y(re(e.target.name,e.target.value))}}),Object(j.jsx)("p",{children:u})]}),Object(j.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(j.jsxs)("div",{className:"".concat(P.a.box_register," mt-20"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(j.jsx)(i.b,{to:"/login",className:"text text_type_main-default ".concat(P.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},ue=function(){var e=x((function(e){return e.registrationForm})),t=e.password,n=e.emailCode,r=e.registerReceivedData,a=e.resetSuccess,s=Object(c.useState)("password"),u=Object(l.a)(s,2),_=u[0],b=u[1],m=Object(o.g)(),p=O(),f=Object(o.f)();Object(c.useEffect)((function(){(r||!0===a)&&m("/login"),null===f.state&&m("/"),p({type:ce})}),[r,a]);var h=function(e){p(re(e.target.name,e.target.value))};return Object(j.jsx)("div",{className:P.a.main,children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(ie({password:t,token:n},D)),a&&(p({type:ne}),m("/login"))},className:P.a.box_form,children:[Object(j.jsx)("h2",{className:"text text_type_main-medium pb-6",children:"\u0412\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(d.Input,{name:"password",icon:"ShowIcon",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onIconClick:function(){b("password"===_?"text":"password")},value:t,type:_,onChange:h})}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(d.Input,{type:"text",name:"emailCode",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:n,onChange:h})}),Object(j.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(j.jsxs)("div",{className:"".concat(P.a.box_register," mt-20"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(j.jsx)(i.b,{to:"/login",className:"text text_type_main-default ".concat(P.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},_e=n(13),je=n.n(_e),be=function(){var e=O(),t=Object(o.g)(),n=function(e){return e.isActive?"".concat(je.a.links__profile_menu_active,"\n    text text_type_main-medium "):"".concat(je.a.links__profile_menu," text text_type_main-medium")};return Object(j.jsxs)("div",{className:je.a.menu__box,children:[Object(j.jsxs)("ul",{className:je.a.menu__lists,children:[Object(j.jsxs)("li",{className:"".concat(je.a.menu__list),children:[" ",Object(j.jsx)(i.c,{to:"/profile",className:n,end:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c "})]}),Object(j.jsx)("li",{className:"".concat(je.a.menu__list),children:Object(j.jsx)(i.c,{to:"/profile/orders",className:n,end:!0,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432 "})}),Object(j.jsx)("li",{onClick:function(){var n,c=localStorage.getItem("refreshToken");h("accessToken",!1,{expires:-1}),n={token:c},fetch("".concat(C,"auth/logout"),{method:"POST",headers:new Headers([["Content-Type","application/json"]]),body:JSON.stringify(n)}).then(T),localStorage.removeItem("refreshToken"),e({type:X}),t("/login")},className:"".concat(je.a.menu__list," text text_type_main-medium"),children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},me=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(l.a)(a,2),i=s[0],u=s[1],_=Object(c.useState)(""),b=Object(l.a)(_,2),m=b[0],p=b[1],O=Object(c.useState)(!1),x=Object(l.a)(O,2),f=x[0],g=x[1],y=Object(o.g)(),v=Object(o.f)(),N=function(){F().then((function(e){e&&e.success&&(r(e.user.email),u(e.user.name))})).catch((function(e){console.log("jwt expired"===e.message),"jwt expired"===e.message?A().then((function(e){h("accessToken",e.accessToken.split("Bearer ")[1],{}),localStorage.setItem("refreshToken",e.refreshToken),g(!0),F(),r(e.user.email),u(e.user.name)})).catch((function(e){console.log(e),"Token is invalid"===e.message&&y("/login")})):y("/login",v)}))};Object(c.useEffect)((function(){g(!0),N(),g(!1)}),[f]);return Object(j.jsx)("div",{className:je.a.main,children:Object(j.jsxs)("div",{className:je.a.main__box,children:[Object(j.jsx)(be,{}),Object(j.jsxs)("div",{className:je.a.inputs__box,children:[Object(j.jsx)(d.Input,{icon:"EditIcon",type:"text",placeholder:"\u0418\u043c\u044f",value:i,onChange:function(e){u(e.target.value)}}),Object(j.jsx)(d.Input,{icon:"EditIcon",type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",value:n,onChange:function(e){r(e.target.value)}}),Object(j.jsx)(d.Input,{icon:"EditIcon",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:m,onChange:function(e){p(e.target.value)}}),Object(j.jsxs)("div",{className:je.a.button__box,children:[Object(j.jsx)(d.Button,{onClick:function(){M({email:n,password:m,name:i}).then((function(e){e&&e.success&&(r(e.user.email),u(e.user.name))})).catch((function(e){console.log(e),console.log("jwt expired"===e.message),"jwt expired"===e.message?A().then((function(e){h("accessToken",e.accessToken.split("Bearer ")[1],{}),localStorage.setItem("refreshToken",e.refreshToken),g(!0),M({email:n,password:m,name:i}).then((function(e){e&&e.success&&(r(e.user.email),u(e.user.name))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),"token invalid"===e.message&&y("/login")})):y("/login",v)}))},type:"primary",size:"small",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(j.jsx)(d.Button,{onClick:function(){N()},type:"primary",size:"small",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})})},pe=n(93),Oe=n.n(pe),xe=n(195),fe="OPEN_INGREDIENT_DETAILS",he="CLOSE_INGREDIENT_DETAILS",ge=n(21),ye=n.n(ge);!function(e){e.bun="bun",e.main="main",e.sauce="sauce"}(y||(y={}));var ve=function(e){var t=e.ingredient,n=e.setModalIsOpen,c=t._id,r=t.image,a=t.name,s=t.price,u=t.type,_=Object(o.f)(),b=Object(xe.a)({type:"ingredient",item:{_id:c,image:r,name:a,price:s,type:u}}),m=Object(l.a)(b,2)[1],p=x((function(e){return e.arrayInConstructor})).arrayID.filter((function(e){return e===t._id})).length,f=O();return Object(j.jsx)(i.b,{className:ye.a.liks_style,to:{pathname:"/ingredients/".concat(c)},state:{positionPopap:_},children:Object(j.jsxs)("li",{ref:m,onClickCapture:function(){f({type:fe,ingredient:t}),n(!0)},className:"".concat(ye.a.card_list," pl-4"),children:[p>0?Object(j.jsx)(d.Counter,{count:p,size:"default"}):null,Object(j.jsx)("img",{alt:t.name,src:t.image,className:"".concat(ye.a.picture," pl-4 pr-4")}),Object(j.jsxs)("div",{className:"".concat(ye.a.card_price_box," pt-1 pb-1"),children:[Object(j.jsx)("p",{className:"text text_type_digits-default pr-2",children:t.price}),Object(j.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(j.jsx)("p",{className:"text text_type_main-small",children:t.name})]},t._id)})},Ne=function(e){var t=e.data,n=e.type,c=e.setModalIsOpen;return null!==t?t.filter((function(e){return e.type===n})).map((function(e){return Object(j.jsx)(ve,{ingredient:e,setModalIsOpen:c},e._id)})):Object(j.jsx)("h2",{children:"\u043d\u0435\u0442"})};function Se(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=(t[0],t[1]),a=r.a.useState("\u0411\u0443\u043b\u043a\u0438"),s=Object(l.a)(a,2),i=s[0],o=s[1],u=x((function(e){return e.ingredients})).ingredients,_=Object(c.useRef)(null),b=Object(c.useRef)(null),m=Object(c.useRef)(null),p=function(e){"\u0411\u0443\u043b\u043a\u0438"===e?(_.current&&_.current.scrollIntoView({block:"start",behavior:"smooth"}),o("\u0411\u0443\u043b\u043a\u0438")):"\u0421\u043e\u0443\u0441\u044b"===e?(_.current&&b.current.scrollIntoView({block:"start",behavior:"smooth"}),o("\u0421\u043e\u0443\u0441\u044b")):"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===e&&(_.current&&m.current.scrollIntoView({block:"start",behavior:"smooth"}),o("\u041d\u0430\u0447\u0438\u043d\u043a\u0438"))};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("section",{className:ye.a.ingredients,children:[Object(j.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(j.jsxs)("div",{className:"mt-10 mb-5",style:{display:"flex"},children:[Object(j.jsx)(d.Tab,{active:"\u0411\u0443\u043b\u043a\u0438"===i,onClick:function(){return p("\u0411\u0443\u043b\u043a\u0438")},value:"\u0411\u0443\u043b\u043a\u0438",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)(d.Tab,{active:"\u0421\u043e\u0443\u0441\u044b"===i,onClick:function(){return p("\u0421\u043e\u0443\u0441\u044b")},value:"\u0421\u043e\u0443\u0441\u044b",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)(d.Tab,{active:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===i,onClick:function(){return p("\u041d\u0430\u0447\u0438\u043d\u043a\u0438")},value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(j.jsxs)("div",{onScroll:function(e){return function(e){e.target.scrollTop<239?o("\u0411\u0443\u043b\u043a\u0438"):e.target.scrollTop>239&&e.target.scrollTop<630?o("\u0421\u043e\u0443\u0441\u044b"):e.target.scrollTop>630&&o("\u041d\u0430\u0447\u0438\u043d\u043a\u0438")}(e)},className:ye.a.box_with_ingredients,children:[Object(j.jsx)("h2",{className:"text text_type_main-medium",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)("ul",{ref:_,className:"".concat(ye.a.lists," pl-2"),children:Object(j.jsx)(Ne,{setModalIsOpen:n,data:u,type:y.bun})}),Object(j.jsx)("h2",{className:"text text_type_main-medium",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)("ul",{ref:b,className:"".concat(ye.a.lists," pl-2"),children:Object(j.jsx)(Ne,{setModalIsOpen:n,data:u,type:y.sauce})}),Object(j.jsx)("h2",{className:"text text_type_main-medium",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(j.jsx)("ul",{ref:m,className:"".concat(ye.a.lists," pl-2"),children:Object(j.jsx)(Ne,{setModalIsOpen:n,data:u,type:y.main})})]})]})})}var Ce=n(197),Ie=n(28),Ee=n.n(Ie),Te=n(29),ke=n.n(Te),we=n.p+"static/media/done.a1cd4e2d.png";function Re(e){var t=e.order;return null!==t?Object(j.jsxs)("div",{className:ke.a.main,children:[Object(j.jsx)("h2",{className:"".concat(ke.a.position_center," mt-30 mb-8 text text_type_digits-large"),children:t.number}),Object(j.jsx)("p",{className:"".concat(ke.a.position_center," text text_type_main-medium"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(j.jsx)("img",{className:"".concat(ke.a.picture," mt-15 mb-15"),src:we,alt:"\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u043e"}),Object(j.jsx)("p",{className:"".concat(ke.a.position_center," text text_type_main-small"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(j.jsx)("p",{className:"".concat(ke.a.position_center," mt-2 text text_type_main-small text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}):Object(j.jsx)("h2",{children:" \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}var De=n(40),Fe=n.n(De),Me=n(95),Ae=n.n(Me),Ge=function(e){return x((function(e){return e.ingredientDetail})).modalOpen?Object(j.jsx)("div",{onClick:function(t){t.target===t.currentTarget&&e.closeModal()},className:Ae.a.modal_overlay,children:e.children}):null},Le=function(e){r.a.useEffect((function(){var t=function(t){t.preventDefault(),"Escape"===t.key&&e.closeModal()};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e.closeModal]);var t=document.getElementById("modal");return Object(a.createPortal)(Object(j.jsx)(Ge,{closeModal:e.closeModal,children:Object(j.jsxs)("div",{className:"".concat(Fe.a.modal_container," ").concat(539===e.height?Fe.a.modal_container_height_539:Fe.a.modal_container_height_718),children:[Object(j.jsx)("button",{onClick:e.closeModal,type:"button",className:Fe.a.modal_btn_close,children:Object(j.jsx)(d.CloseIcon,{type:"primary"})}),e.children]})}),t)},Ue=Le,qe="ADD_INGREDIENT",Be="DELETE_INGREDIENT",He="SORT_INGERDIENTS",Pe="DELETE_BUN",ze="CLEAR_CONSTRUCTOR",Je="GET_ORDER_REQUEST",We="GET_ORDER_SUCCESS",Ve="GET_ORDER_FAILED",Xe="ORDER_CLEANING",Ye="OPEN_ORDER_MODAL",Ze=function(){return{type:Ve}},Qe=function(e){return function(t){var n;t({type:Je}),(n=e,fetch("".concat(C,"orders"),{method:"POST",headers:new Headers([["Content-Type","application/json"],["Authorization","Bearer ".concat(g("accessToken"))]]),body:JSON.stringify({ingredients:n})}).then(T)).then((function(e){var n;e&&e.success?t((n=e.order,{type:We,orederNumber:n})):t(Ze())})).catch((function(e){t(Ze())}))}},Ke=n(196),$e=function(e){var t,n,c,a=e.ingredient,s=e.index,i=r.a.useRef(null),o=O(),u=Object(xe.a)({type:"ingredientInConstructior",item:{ingredient:a,index:s},collect:function(e){return{isDrag:e.isDragging()}}}),_=Object(l.a)(u,2),b=_[0].isDrag,m=_[1],p=Object(Ke.a)({accept:"ingredientInConstructior",drop:function(e){o({type:He,dragIndex:e.index,dropIndex:s})}});m((0,Object(l.a)(p,2)[1])(i));return Object(j.jsx)(j.Fragment,{children:!b&&Object(j.jsxs)("li",{ref:i,className:Ee.a.open_elements_box,children:[Object(j.jsx)(d.DragIcon,{type:"primary"}),Object(j.jsx)(d.ConstructorElement,{isLocked:!1,handleClose:function(){o({type:Be,ingredient:a})},thumbnail:null!==(t=a.image)&&void 0!==t?t:"",text:null!==(n=a.name)&&void 0!==n?n:"",price:null!==(c=a.price)&&void 0!==c?c:0})]})})},et=function(e){var t,n,c=e.ingredientsInConstructor,r=e.positionEn,a=e.position,s=c.find((function(e){return e.type===y.bun}));return 0!==c.length&&s?Object(j.jsx)("div",{className:Ee.a.lock_elements,children:Object(j.jsx)(d.ConstructorElement,{type:r,isLocked:!0,thumbnail:null!==(t=null===s||void 0===s?void 0:s.image)&&void 0!==t?t:"",text:"".concat(s.name," ").concat(a),price:null!==(n=s.price)&&void 0!==n?n:0})},s._id):Object(j.jsx)("p",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})},tt=function(e){var t=e.ingredientsInConstructor,n=e.type;return t?t.filter((function(e){return e.type!==n})).map((function(e,t){return Object(j.jsx)($e,{index:t,ingredient:e},Object(Ce.a)())})):Object(j.jsx)("p",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442"})};function nt(){var e=x((function(e){return e.ingredients})).ingredients,t=r.a.useState(0),n=Object(l.a)(t,2),c=n[0],a=n[1],s=x((function(e){return e.arrayInConstructor})).ingredientsInConstructor,i=x((function(e){return e.order})),u=i.orederNumber,_=i.orderNumberFailed,b=i.orederNumberRequest,m=O(),p=s.find((function(e){return e.type===y.bun})),f=Object(o.g)(),h=s.map((function(e){return e._id}));r.a.useEffect((function(){_&&(f("/login"),m({type:Xe}))}),[_]),r.a.useEffect((function(){null!==u&&m({type:Ye,order:u})}),[u]),r.a.useEffect((function(){}),[e]),r.a.useEffect((function(){if(0!==s.length&&p){var e=s.filter((function(e){return e.type!==y.bun})).reduce((function(e,t){return e+t.price}),0)+p.price;a(e)}}),[s]);var g=Object(Ke.a)({accept:"ingredient",drop:function(e){e.type===y.bun&&p?(m({type:Pe,bunInArray:p}),m({type:qe,ingredient:e})):m({type:qe,ingredient:e})}}),v=Object(l.a)(g,2)[1];return null!==e?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("section",{ref:v,className:"".concat(Ee.a.constructor," pt-25 mt-4 "),children:[Object(j.jsx)(et,{positionEn:"top",position:"\u0412\u0435\u0440\u0445",ingredientsInConstructor:s}),Object(j.jsx)("ul",{className:"".concat(Ee.a.open_elements," pt-4"),children:Object(j.jsx)(tt,{type:y.bun,ingredientsInConstructor:s})}),Object(j.jsx)(et,{positionEn:"bottom",position:"\u041d\u0438\u0437",ingredientsInConstructor:s}),Object(j.jsxs)("div",{className:"".concat(Ee.a.price_container," mt-10 mr-4"),children:[Object(j.jsxs)("div",{className:"".concat(Ee.a.price_text," mr-10"),children:[Object(j.jsx)("p",{className:"text text_type_digits-medium pr-2",children:c}),Object(j.jsx)(d.CurrencyIcon,{type:"primary"})]}),s.length>0?Object(j.jsx)(d.Button,{onClick:function(){return m(Qe(h)),_?(f("/login"),Object(j.jsx)("p",{children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"})):b?Object(j.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):void 0},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}):null]}),b&&Object(j.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]}),u&&Object(j.jsx)(Ue,{height:718,closeModal:function(){m({type:Xe}),m({type:ze}),a(0)},children:Object(j.jsx)(Re,{order:u})})]}):Object(j.jsx)("h2",{children:" \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}var ct=function(){var e=Object(o.f)(),t=Object(o.g)();return Object(c.useEffect)((function(){"/"!==e.pathname&&t("/")}),[]),Object(j.jsxs)("main",{className:Oe.a.main,children:[Object(j.jsx)(Se,{}),Object(j.jsx)(nt,{})]})},rt=n(48),at=["children"],st=function(e){var t=e.children,n=(Object(rt.a)(e,at),Object(o.f)());return g("accessToken")?t:Object(j.jsx)(o.a,{replace:!0,to:"/login",state:n.pathname})},it=n(22),ot=n.n(it),lt=function(){var e=x((function(e){return e.ingredients})).ingredients,t=Object(c.useState)(e),n=Object(l.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){e&&a(e.find((function(e){return e._id===s.id})))}),[e]);var s=Object(o.h)();return Object(j.jsx)(j.Fragment,{children:e&&r&&Object(j.jsxs)("div",{className:ot.a.main,children:[Object(j.jsx)("h2",{className:"".concat(ot.a.title," mt-10 mr-10 ml-10 text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(j.jsx)("img",{className:ot.a.picture,src:r.image,alt:r.name}),Object(j.jsx)("p",{className:"".concat(ot.a.name," mt-4 mb-8 text text_type_main-medium"),children:r.name}),Object(j.jsxs)("ul",{className:ot.a.\u0441omposition,children:[Object(j.jsxs)("li",{className:ot.a.\u0441omposition_list_box,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r.calories})]}),Object(j.jsxs)("li",{className:ot.a.\u0441omposition_list_box,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r.proteins})]}),Object(j.jsxs)("li",{className:ot.a.\u0441omposition_list_box,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r.fat})]}),Object(j.jsxs)("li",{className:ot.a.\u0441omposition_list_box,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r.carbohydrates})]})]})]})})},dt=function(){return Object(j.jsx)("div",{className:"text text_type_main-default",children:"\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})},ut=n(16),_t=n.n(ut),jt=function(){var e=x((function(e){return e.wsOrdes})).orders,t=Object(c.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){!function(){if(null!==e){var t=e.orders.filter((function(e){return"done"===e.status})).slice(0,10).map((function(e){return e.number}));a(t)}}()}),[e]),r.length>0?Object(j.jsx)(j.Fragment,{children:r.map((function(e){return Object(j.jsx)("li",{className:"text text_type_digits-default ".concat(_t.a.statistics__number_list," ").concat(_t.a.statistics__number),children:e},Object(Ce.a)())}))}):Object(j.jsx)("li",{className:"text text_type_main-small",children:"\u0413\u043e\u0442\u043e\u0432\u044b\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435\u0442"},Object(Ce.a)())},bt=function(){var e=x((function(e){return e.wsOrdes})).orders,t=Object(c.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){!function(){if(null!==e){var t=e.orders.filter((function(e){return"pending"===e.status})).slice(0,5).map((function(e){return e.number}));a(t)}}()}),[e]),r.length>0?Object(j.jsx)(j.Fragment,{children:r.map((function(e){return Object(j.jsx)("li",{className:"text text_type_digits-default ".concat(_t.a.statistics__number_list),children:e},Object(Ce.a)())}))}):Object(j.jsx)("li",{className:"text text_type_main-small",children:"\u0412\u0441\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0433\u043e\u0442\u043e\u0432\u044b"},Object(Ce.a)())},mt=function(){var e=x((function(e){return e.wsOrdes})).orders;return Object(j.jsxs)("div",{className:_t.a.statistics,children:[Object(j.jsxs)("div",{className:_t.a.statistics__number_order,children:[Object(j.jsxs)("div",{className:_t.a.statistics__number_box,children:[Object(j.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(j.jsx)("ul",{className:_t.a.statistics__number_lists,children:Object(j.jsx)(jt,{})})]}),Object(j.jsxs)("div",{className:_t.a.statistics__number_box,children:[Object(j.jsx)("p",{className:"text text_type_main-medium  mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(j.jsx)("ul",{className:_t.a.statistics__number_lists,children:Object(j.jsx)(bt,{})})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),e&&Object(j.jsx)("p",{className:"text text_type_digits-large",children:e.total})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),e&&Object(j.jsx)("p",{className:"text text_type_digits-large",children:e.totalToday})]})]})},pt=n(8),Ot=n.n(pt),xt="OPEN_ORDER_CARD",ft="CLOSE_ORDER_CARD",ht=function(e){var t=e.pictureArray;return t.length>0?Object(j.jsx)(j.Fragment,{children:t.slice(0,4).map((function(e,n){return Object(j.jsx)("img",{className:Ot.a.card__picture,style:{zIndex:t.length-n},alt:e.name,src:e.image},e._id)}))}):Object(j.jsx)("p",{children:"\u0421\u0442\u0440\u0430\u043d\u043d\u043e, \u0431\u0443\u0440\u0433\u0435\u0440\u043e\u0432 \u0432 \u0437\u0430\u043a\u0430\u0437\u0435 \u043d\u0435\u0442"})},gt=function(e){var t=e.ordesData,n=x((function(e){return e.ingredients})).ingredients,r=x((function(e){return e.wsOrdes})).orders,a=Object(c.useState)([]),s=Object(l.a)(a,2),u=s[0],_=s[1],b=Object(c.useState)("01.01.2022"),m=Object(l.a)(b,2),p=m[0],f=m[1],h=Object(c.useState)(1),g=Object(l.a)(h,2),y=g[0],C=g[1],I=Object(c.useState)(0),E=Object(l.a)(I,2),T=E[0],k=E[1],w=Object(c.useState)(!1),R=Object(l.a)(w,2),D=R[0],F=R[1],M=Object(o.f)(),A=O();return Object(c.useEffect)((function(){!function(){if(n&&r&&t){var e=n.filter((function(e){return t.ingredients.includes(e._id)}));C(e.length-5),k(S(N(t,n))),_(e)}}(),f(v(t.createdAt))}),[n,t]),Object(c.useEffect)((function(){"/profile/orders"===M.pathname?F(!0):F(!1)}),[t]),Object(j.jsxs)(i.b,{className:Ot.a.card__liks_style,to:{pathname:"".concat(M.pathname,"/").concat(t._id)},state:{positionPopap:M},children:[Object(j.jsxs)("li",{onClickCapture:function(){A({type:xt,orderCard:t})},className:Ot.a.card,children:[Object(j.jsxs)("div",{className:Ot.a.card__number_box,children:[Object(j.jsx)("p",{className:"text text_type_digits-default",children:t.number}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:p})]}),Object(j.jsx)("h2",{className:"text text_type_main-medium pb-6",children:t.name}),D&&Object(j.jsx)("p",{style:"done"===t.status?{color:"#00CCCC"}:{color:"white"},className:"".concat(Ot.a.details_status_text," text text_type_main-small mb-6"),children:"done"===t.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}),Object(j.jsxs)("div",{className:Ot.a.card__bottom_box,children:[Object(j.jsxs)("div",{className:Ot.a.card__picture_box,children:[Object(j.jsx)(ht,{pictureArray:u}),u[6]&&Object(j.jsxs)("div",{className:Ot.a.card_picture_number_box,children:[Object(j.jsx)("img",{className:"".concat(Ot.a.card__picture," ").concat(Ot.a.card_picture_last),style:{zIndex:8},alt:u[6].name,src:u[6].image}),Object(j.jsx)("p",{className:Ot.a.card_picture_number_text,children:"+".concat(y)})]})]}),Object(j.jsxs)("div",{className:Ot.a.card__price_box,children:[Object(j.jsx)("p",{className:"".concat(Ot.a.card__price," text text_type_digits-default "),children:T}),Object(j.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]},t._id)," "]})},yt=function(e){var t=e.orders,n=Object(c.useState)([]),r=Object(l.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){null!==t&&s(t.orders)}),[t]),a.length>0?Object(j.jsx)(j.Fragment,{children:a.map((function(e){return Object(j.jsx)(gt,{ordesData:e},e._id)}))}):Object(j.jsx)("p",{children:"\u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435\u0442"})},vt="WS_CONNECTION_SUCCESS",Nt="WS_CONNECTION_ERROR",St="WS_CONNECTION_CLOSED",Ct="WS_GET_MESSAGE",It="WS_SEND_MESSAGE",Et="WS_CONNECTION_START",Tt=function(e){return{type:Et,payload:e}},kt=function(){return{type:St}},wt=function(){var e=x((function(e){return e.wsOrdes})).orders;return Object(j.jsxs)("div",{className:_t.a.box_cards,children:[Object(j.jsx)("h1",{className:"text text_type_main-large mt-10 pb-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(j.jsx)("ul",{className:_t.a.card__list,children:Object(j.jsx)(yt,{orders:e})})]})},Rt=function(){var e=Object(o.f)(),t=Object(o.g)(),n=O();return Object(c.useEffect)((function(){return n(Tt(I)),function(){n(kt())}}),[n]),Object(c.useEffect)((function(){"/feed"!==e.pathname&&t("/feed")}),[]),Object(j.jsxs)("section",{className:_t.a.feed,children:[Object(j.jsx)(wt,{}),Object(j.jsx)(mt,{})]})},Dt=function(e){var t=e.oderData;return t?Object(j.jsx)(j.Fragment,{children:t.map((function(e){return Object(j.jsxs)("li",{className:Ot.a.details_list_ingredient,children:[Object(j.jsx)("img",{className:"".concat(Ot.a.card__picture," mr-4"),alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",src:e.image}),Object(j.jsx)("p",{className:"text text_type_main-small mr-6",children:e.name}),Object(j.jsxs)("div",{className:Ot.a.details_ingredient_price_box,children:[Object(j.jsx)("p",{children:"".concat(e.numberIngred," x ").concat(e.numberIngred*e.price)}),Object(j.jsx)(d.CurrencyIcon,{type:"primary"})]})]},e._id)}))}):Object(j.jsx)("p",{children:"\u0421\u0442\u0440\u0430\u043d\u043d\u043e \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u0442\u043e\u0432 \u043d\u0435\u0442"})},Ft=function(){var e=x((function(e){return e.wsOrdes})).orders,t=x((function(e){return e.ingredients})).ingredients,n=Object(c.useState)(null),r=Object(l.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(null),u=Object(l.a)(i,2),_=u[0],b=u[1],m=Object(c.useState)(0),p=Object(l.a)(m,2),f=p[0],h=p[1],y=Object(c.useState)("01.01.2022"),C=Object(l.a)(y,2),T=C[0],k=C[1],w=O(),R=Object(o.h)(),D=Object(o.f)(),F=g("accessToken");return Object(c.useEffect)((function(){if(e&&t){var n=e.orders.find((function(e){return e._id===R.id}));b(N(n,t)),s(n)}else D.pathname==="/profile/orders/".concat(R.id)?w(Tt(E(F))):w(Tt(I))}),[e,t]),Object(c.useEffect)((function(){a&&k(v(a.createdAt))}),[a]),Object(c.useEffect)((function(){_&&h(S(_))}),[_]),Object(j.jsx)(j.Fragment,{children:a&&t&&Object(j.jsx)("section",{className:Ot.a.details_main,children:Object(j.jsxs)("div",{className:Ot.a.details_main_popap,children:[Object(j.jsx)("h2",{className:"text_type_main-small mt-10  mb-10 ".concat(Ot.a.details_number_order),children:"#".concat(a.number)}),Object(j.jsx)("p",{className:"text text_type_main-medium mb-3 ".concat(Ot.a.details_name),children:a.name}),Object(j.jsx)("p",{style:"done"===a.status?{color:"#00CCCC"}:{color:"red"},className:"".concat(Ot.a.details_status_text," text text_type_main-small mb-15"),children:"done"===a.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}),Object(j.jsx)("p",{className:"text text_type_main-medium mb-6",children:"C\u043e\u0441\u0442\u0430\u0432:"}),Object(j.jsx)("ul",{className:Ot.a.details_lists,children:Object(j.jsx)(Dt,{oderData:_})}),Object(j.jsxs)("div",{className:Ot.a.details_bottom_box,children:[Object(j.jsx)("p",{className:"text_color_inactive",children:T}),Object(j.jsxs)("div",{className:Ot.a.details_box_price,children:[Object(j.jsx)("p",{className:"text text_type_digits-default",children:f}),Object(j.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})})})},Mt=function(){var e=x((function(e){return e.wsOrdes})).orders,t=O(),n=Object(o.f)(),r=Object(o.g)(),a=g("accessToken");return Object(c.useEffect)((function(){return t(Tt(E(a))),function(){t(kt())}}),[t]),Object(c.useEffect)((function(){"/profile/orders"!==n.pathname&&r("/profile/orders")}),[]),Object(j.jsx)("div",{className:je.a.main,children:Object(j.jsxs)("div",{className:je.a.main__box_history,children:[Object(j.jsx)("div",{className:"mt-20",children:Object(j.jsx)(be,{})}),Object(j.jsx)("ul",{className:je.a.card__list,children:Object(j.jsx)(yt,{orders:e})})]})})};function At(){var e=x((function(e){return e.ingredients})),t=e.ingredientsRequest,n=e.ingredientsFailed,c=O(),a=Object(o.f)(),s=Object(o.g)(),i=a.state&&a.state.positionPopap,l=function(){c({type:he}),s(i.pathname)};return r.a.useEffect((function(){c(B())}),[c]),r.a.useEffect((function(){s(JSON.parse(window.sessionStorage.getItem("lastRoute")||"{}")),window.onbeforeunload=function(){window.sessionStorage.setItem("lastRoute",JSON.stringify(window.location.pathname))}}),[]),n?Object(j.jsx)("div",{children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}):t?Object(j.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(j.jsx)(m.a,{backend:f.a,children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(b,{}),i&&Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/ingredients/:id",element:Object(j.jsx)(Le,{height:539,closeModal:function(){return l()},children:Object(j.jsx)(lt,{})})}),Object(j.jsx)(o.b,{path:"/feed/:id",element:Object(j.jsx)(Le,{height:716,closeModal:function(){return l()},children:Object(j.jsx)(Ft,{})})}),Object(j.jsx)(o.b,{path:"/profile/orders/:id",element:Object(j.jsx)(st,{path:"/profile/orders/id",children:Object(j.jsx)(Le,{height:716,closeModal:function(){return l()},children:Object(j.jsx)(Ft,{})})})})]}),Object(j.jsxs)(o.d,{location:i||a,children:[Object(j.jsx)(o.b,{path:"/",element:Object(j.jsx)(ct,{})}),Object(j.jsx)(o.b,{path:"/login",element:Object(j.jsx)(oe,{})}),Object(j.jsx)(o.b,{path:"/register",element:Object(j.jsx)(le,{})}),Object(j.jsx)(o.b,{path:"/forgot-password",element:Object(j.jsx)(de,{})}),Object(j.jsx)(o.b,{path:"/feed",element:Object(j.jsx)(Rt,{})}),Object(j.jsx)(o.b,{path:"/reset-password",element:Object(j.jsx)(ue,{})}),Object(j.jsx)(o.b,{path:"/feed/:id",element:Object(j.jsx)(Ft,{})}),Object(j.jsx)(o.b,{path:"/profile",element:Object(j.jsx)(st,{path:"/profile",children:Object(j.jsx)(me,{})})}),Object(j.jsx)(o.b,{path:"/profile/orders/:id",element:Object(j.jsx)(st,{path:"/profile/orders/id",children:Object(j.jsx)(Ft,{})})}),Object(j.jsx)(o.b,{path:"/profile/orders",element:Object(j.jsx)(st,{path:"/profile/orders",children:Object(j.jsx)(Mt,{})})}),Object(j.jsx)(o.b,{path:"/ingredients/:id",element:Object(j.jsx)(lt,{})}),")",Object(j.jsx)(o.b,{path:"*",element:Object(j.jsx)(dt,{})})]})]})})}var Gt,Lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,198)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},Ut=n(24),qt=n(2),Bt={ingredientsRequest:!1,ingredientsFailed:!1,ingredients:null},Ht={modalOpen:!1,ingredient:null,order:null,orderCard:null},Pt=n(34),zt={ingredientsInConstructor:[],arrayID:[]},Jt={orederNumberRequest:!1,orderNumberFailed:!1,orederNumber:null},Wt=n(46),Vt={email:"",password:"",name:"",emailForgot:"",emailCode:"",registrationRequest:!1,registrationFailed:!1,registrationSuccess:!1,registerReceivedData:null,resetSuccess:!1,resetFailed:!1,forgotSuccess:!1,forgotFailed:!1},Xt={wsConnected:!1,orders:null,error:void 0},Yt=Object(Ut.combineReducers)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(qt.a)(Object(qt.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1});case L:return Object(qt.a)(Object(qt.a)({},e),{},{ingredientsFailed:!1,ingredients:t.ingredients,ingredientsRequest:!1});case U:return Object(qt.a)(Object(qt.a)({},e),{},{ingredientsFailed:!0,ingredientsRequest:!1});default:return e}},ingredientDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return Object(qt.a)(Object(qt.a)({},e),{},{order:null,modalOpen:!0,ingredient:t.ingredient});case Ye:return Object(qt.a)(Object(qt.a)({},e),{},{modalOpen:!0,order:t.order});case he:return Object(qt.a)(Object(qt.a)({},e),{},{modalOpen:!1,ingredient:null,orderCard:null});case xt:return Object(qt.a)(Object(qt.a)({},e),{},{modalOpen:!0,orderCard:t.orderCard});case ft:return Object(qt.a)(Object(qt.a)({},e),{},{modalOpen:!1,orderCard:null});default:return e}},arrayInConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:var n=function(){return Date.now().toString(36)+Math.random().toString(36)},c=n();return Object(qt.a)(Object(qt.a)({},e),{},{arrayID:Object(Pt.a)(e.arrayID.concat(t.ingredient._id)),ingredientsInConstructor:[].concat(Object(Pt.a)(e.ingredientsInConstructor),[Object(qt.a)(Object(qt.a)({},t.ingredient),{},{idConstr:c})])});case Be:var r=function(){return e.arrayID.findIndex((function(e){return e===t.ingredient._id}))},a=e.arrayID.slice();return a.splice(r(),1),Object(qt.a)(Object(qt.a)({},e),{},{arrayID:a,ingredientsInConstructor:Object(Pt.a)(e.ingredientsInConstructor.filter((function(e){return e.idConstr!==t.ingredient.idConstr})))});case Pe:return Object(qt.a)(Object(qt.a)({},e),{},{ingredientsInConstructor:Object(Pt.a)(e.ingredientsInConstructor.filter((function(e){return e._id!==t.bunInArray._id}))),arrayID:Object(Pt.a)(e.arrayID.filter((function(e){return e!==t.bunInArray._id})))});case He:var s=e.ingredientsInConstructor.slice().filter((function(e){return e.type!==y.bun}));s.splice(t.dropIndex,0,s.splice(t.dragIndex,1)[0]);var i=e.ingredientsInConstructor.filter((function(e){return e.type===y.bun})),o=s.concat(i);return Object(qt.a)(Object(qt.a)({},e),{},{ingredientsInConstructor:o});case ze:return{ingredientsInConstructor:[],arrayID:[]};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return Object(qt.a)(Object(qt.a)({},e),{},{orederNumberRequest:!0,orderNumberFailed:!1,orederNumber:null});case We:return Object(qt.a)(Object(qt.a)({},e),{},{orederNumberRequest:!1,orederNumber:t.orederNumber});case Ve:return Object(qt.a)(Object(qt.a)({},e),{},{orderNumberFailed:!0,orederNumberRequest:!1});case Xe:return Object(qt.a)(Object(qt.a)({},e),{},{orederNumber:null,orederNumberRequest:!1,orderNumberFailed:!1});default:return e}},registrationForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(qt.a)(Object(qt.a)({},e),{},Object(Wt.a)({},t.field,t.value));case J:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!0,registrationFailed:!1,registrationSuccess:!1});case W:return Object(qt.a)(Object(qt.a)({},e),{},{email:"",password:"",name:"",emailCode:"",registrationRequest:!1,registerReceivedData:t.tokenData,registrationSuccess:!0});case V:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!1,registrationFailed:!0,registrationSuccess:!1});case X:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!1,registrationFailed:!1,registerReceivedData:null,registrationSuccess:!1});case Y:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!0,forgotSuccess:!1,forgotFailed:!1});case Z:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!1,forgotSuccess:!0,forgotFailed:!1});case Q:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!1,forgotSuccess:!1,forgotFailed:!0});case K:return Object(qt.a)(Object(qt.a)({},e),{},{emailForgot:"",emailCode:""});case $:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!0,resetSuccess:!1,resetFailed:!1});case ee:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!1,resetSuccess:!0,resetFailed:!1});case te:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!1,resetSuccess:!1,resetFailed:!0});case ne:return Object(qt.a)(Object(qt.a)({},e),{},{registrationRequest:!1,resetSuccess:!1,resetFailed:!1,password:"",emailCode:""});case ce:return Object(qt.a)(Object(qt.a)({},e),{},{email:"",password:"",emailForgot:"",emailCode:"",name:"",registrationFailed:!1});default:return e}},wsOrdes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return Object(qt.a)(Object(qt.a)({},e),{},{error:void 0,wsConnected:!0});case Nt:return Object(qt.a)(Object(qt.a)({},e),{},{error:t.payload,wsConnected:!1});case St:return Object(qt.a)(Object(qt.a)({},e),{},{error:void 0,wsConnected:!1,orders:null});case Ct:return Object(qt.a)(Object(qt.a)({},e),{},{error:void 0,orders:t.payload});default:return e}}}),Zt=n(96),Qt=["success"],Kt=n(97),$t={wsInit:Et,wsSendMessage:It,onOpen:vt,onClose:St,onError:Nt,onMessage:Ct},en=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ut.compose,Object(Zt.composeWithDevTools)(Object(Ut.applyMiddleware)(Kt.a,(Gt=$t,function(e){var t=null;return function(n){return function(c){var r=e.dispatch,a=(e.getState,c.type),s=c.payload,i=Gt.wsInit,o=(Gt.wsSendMessage,Gt.onOpen),l=Gt.onClose,d=Gt.onError,u=Gt.onMessage;a===i&&(t=new WebSocket(s)),t&&(t.onopen=function(e){r({type:o,payload:e})},t.onerror=function(e){r({type:d,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),c=(n.success,Object(rt.a)(n,Qt));r({type:u,payload:c})},t.onclose=function(e){r({type:l,payload:e})}),n(c)}}})))),tn=Object(Ut.createStore)(Yt,en);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(p.a,{store:tn,children:Object(j.jsx)(i.a,{children:Object(j.jsx)(At,{})})})}),document.getElementById("root")),Lt()},21:function(e,t,n){e.exports={ingredients:"burgerIngredients_ingredients__3f75l",lists:"burgerIngredients_lists__2iiDc",card_list:"burgerIngredients_card_list__3HecX",card_price_box:"burgerIngredients_card_price_box__ArkDf",picture:"burgerIngredients_picture__3CfkX",box_with_ingredients:"burgerIngredients_box_with_ingredients__2ij24",liks_style:"burgerIngredients_liks_style__33EJb"}},22:function(e,t,n){e.exports={picture:"ingredientDetails_picture__2vQLC",name:"ingredientDetails_name__1nIsM","\u0441omposition":"ingredientDetails_\u0441omposition__26i61","\u0441omposition_list_box":"ingredientDetails_\u0441omposition_list_box__1UOlb",main:"ingredientDetails_main__3PLOV",title:"ingredientDetails_title__35NNx"}},25:function(e,t,n){e.exports={header:"appHeader_header__LY2mM",logo_box:"appHeader_logo_box__2YzYB",menu:"appHeader_menu__3Un8d",menu_link:"appHeader_menu_link__lKW3b",link_style:"appHeader_link_style__FJHy3",link_style_active:"appHeader_link_style_active__29kfY"}},28:function(e,t,n){e.exports={constructor:"burgerConstructor_constructor__2nXqI",open_elements:"burgerConstructor_open_elements__16V86",lock_elements:"burgerConstructor_lock_elements__pjpry",price_container:"burgerConstructor_price_container__2W6Uz",price_text:"burgerConstructor_price_text__1AnB4",open_elements_box:"burgerConstructor_open_elements_box__3FM_G"}},29:function(e,t,n){e.exports={main:"orderDetails_main__k-bZm",picture:"orderDetails_picture__qGCAS",position_center:"orderDetails_position_center__wqKVc"}},40:function(e,t,n){e.exports={modal_container:"modal_modal_container__Hdjkm",modal_container_height_718:"modal_modal_container_height_718__1yd3j",modal_container_height_539:"modal_modal_container_height_539__1cWfH",modal_btn_close:"modal_modal_btn_close__1fPZU"}},8:function(e,t,n){e.exports={card__list:"cardsOrders_card__list__3aNYx",box_cards:"cardsOrders_box_cards__XGiub",card:"cardsOrders_card__hSnmI",card__number_box:"cardsOrders_card__number_box__3yVhX",card__bottom_box:"cardsOrders_card__bottom_box__3p3yv",card__picture_box:"cardsOrders_card__picture_box__37UKw",card__picture:"cardsOrders_card__picture__mV5C5",card_picture_last:"cardsOrders_card_picture_last__M1onS",card_picture_number_box:"cardsOrders_card_picture_number_box__2DRcD",card_picture_number_text:"cardsOrders_card_picture_number_text__3cj6t",card__price_box:"cardsOrders_card__price_box__3M4EA",card__price:"cardsOrders_card__price__1hfX-",card__liks_style:"cardsOrders_card__liks_style__10CP8",details_main:"cardsOrders_details_main__2cGmg",details_main_popap:"cardsOrders_details_main_popap__SM27C",details_bottom_box:"cardsOrders_details_bottom_box__1Uy0i",details_box_price:"cardsOrders_details_box_price__n1tr-",details_number_order:"cardsOrders_details_number_order__1mjP_",details_list_ingredient:"cardsOrders_details_list_ingredient__22HiI",details_ingredient_price_box:"cardsOrders_details_ingredient_price_box__2g9Cf",details_lists:"cardsOrders_details_lists__Z2mAz",details_status_text:"cardsOrders_details_status_text__1lMn3",details_name:"cardsOrders_details_name__3rwjf"}},93:function(e,t,n){e.exports={main:"mainBlock_main__ay27E"}},95:function(e,t,n){e.exports={modal_overlay:"modalOverlay_modal_overlay__3Oxb6"}}},[[189,1,2]]]);
//# sourceMappingURL=main.1518ec19.chunk.js.map